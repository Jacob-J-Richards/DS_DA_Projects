---
title: "Untitled"
output: html_document
date: "2024-11-19"
---

```{r}
setwd("/Users/jacobrichards/Desktop/DS_DA_Projects/Renewal_Response")
data <- read.csv(file="lease_renewal.csv",header=TRUE)
data
```

Important Note: Please do not build any kind of regression or classification model to address the questions below

What are the key drivers that explain whether a resident will renew the lease or not? In other words, what are the renewal promoters and detractors?

First lets divide the data set into tenants that renewed and those that did not.

```{r}
#rows that did renew 
RENEW <- data[data[,18] == 1, ]

#rows that did not renew 
NOT_RENEW <- data[data[,18] == 0, ]

#any rent change at all 
RENT_INCREASE <- data[data[,2] == 0,]

#rent increased 10 percent 
RENT_INCREASE_10 <- data[data[,3] == 1,]

#rent increased 20 percent 
RENT_INCREASE_20 <- data[data[,4] == 1,]

#there was no rent change at all 
NO_RENT_INCREASE <- data[data[,2] == 1,]

data <- matrix(nrow=2,ncol=2)

data[1,1] <- length(intersect(row.names(RENT_INCREASE),row.names(NOT_RENEW)))

data[1,2] <- length(intersect(row.names(RENT_INCREASE),row.names(RENEW)))

data[2,1] <- length(intersect(row.names(NO_RENT_INCREASE),row.names(NOT_RENEW)))

data[2,2] <- length(intersect(row.names(NO_RENT_INCREASE),row.names(RENEW)))


```

| Cohort_study (Risk,Ratio) | NOT_RENEW | RENEW |
|---------------------------|-----------|-------|
| RENT_INCREASE             | 51797     | 10372 |
| NO_RENT_INCREASE          | 12411     | 5270  |




X	
The number of NOT_RENEW among RENT_INCREASE.

Y	
The number of NOT_RENEW among NO_RENT_INCREASE.

m1	
The number of individuals in RENT_INCREASE..

m2	
The number of individuals in NO_RENT_INCREASE.

```{r}
 riskratio(data[1,1], data[2,1], nrow(RENT_INCREASE), nrow(NO_RENT_INCREASE), conf.level=0.95, p.calc.by.independence=TRUE) 
```

with 95% confidence the odds ratio was between 1.174866 and 1.199149. Given that your rent increased, the probability that you did not renew your lease was between 1.174866 and 1.199149 times greater than if your rent had not increased 95% of the time. 

This was calculated for when there is any rent change at all including less than 10%, 10% and 20%. What if we isolated and test for the risk ratio of rent increasing by 10 or 20% compaired to not at all instead of the aggregate. 


```{r}
#this is wrong
data[1,1] <- length(intersect(row.names(RENT_INCREASE_10),row.names(NOT_RENEW)))

data[1,2] <- length(intersect(row.names(RENT_INCREASE_10),row.names(RENEW)))

riskratio(data[1,1], data[2,1], nrow(RENT_INCREASE), nrow(NO_RENT_INCREASE), conf.level=0.95, p.calc.by.independence=TRUE) 
```

lets check the effect of lease length

```{r}

```

lets check the effect of age

```{r}

```
